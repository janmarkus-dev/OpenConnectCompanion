{% extends 'base.html' %}
{% block content %}
<h3>Health Metrics</h3>
<div id="health" style="height: 360px"></div>
<script>
(async function(){
  const res = await fetch('/api/health');
  const rows = await res.json();
  const x = rows.map(r=>r.date);
  const hr = rows.map(r=>r.resting_hr);
  const bb = rows.map(r=>r.body_battery);
  const st = rows.map(r=>r.stress_level);
  Plotly.newPlot('health', [
    {x, y: hr, name:'Resting HR', type:'scatter', mode:'lines+markers'},
    {x, y: bb, name:'Body Battery', type:'scatter', mode:'lines+markers'},
    {x, y: st, name:'Stress', type:'scatter', mode:'lines+markers'}
  ], {title:'Health metrics over time', xaxis:{type:'date'}}, {responsive:true});
})();
</script>
{% endblock %}
